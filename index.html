<html>
  <head>
    <title>ibaleine</title>
    <link rel="stylesheet" href="./styles/index.css" />
  </head>
  <body>
    <canvas id="canvas" width="800" height="600"></canvas>
    <script src="https://unpkg.com/roughjs@latest/bundled/rough.js"></script>
    <script type="text/javascript">
      const canvasRef = document.getElementById('canvas')

      const onDraw = () => {
        canvasRef.setAttribute('width', window.innerWidth)
        canvasRef.setAttribute('height', window.innerHeight)
        drawCurve()
      }

      document.addEventListener('DOMContentLoaded', onDraw)
      window.addEventListener('resize', onDraw)
      window.addEventListener('unload', () => {
        window.removeEventListener('resize', onDraw)
      })

      function getWaveColor() {
        // selected from [iroiro](https://github.com/antfu/iroiro)
        // script: npx iroiro blue
        const SEA_COLOR_SET = {
          SEIJI: '#69B0AC',
          MIZUASAGI: '#66BAB7',
          BYAKUGUN: '#78C2C4',
          KAMENOZOKI: '#A5DEE4',
          MIZU: '#81C7D4',
        }
        const ranIdx = Math.floor(Math.random() * 4)
        return Object.values(SEA_COLOR_SET)[ranIdx]
      }

      function drawCurve() {
        const rc = rough.canvas(canvasRef)
        // draw sin curve
        let points = []
        for (let i = 0; i <= 50; i++) {
          // 4pi - 400px
          let x = (window.innerWidth / 50) * i
          let xdeg = (Math.PI / 20) * x
          let y = Math.round(Math.sin(xdeg) * 10) + 500
          points.push([x, y])
        }
        rc.curve(points, {
          roughness: 1.2,
          stroke: getWaveColor(),
          strokeWidth: 3,
        })
      }
    </script>
  </body>
</html>
